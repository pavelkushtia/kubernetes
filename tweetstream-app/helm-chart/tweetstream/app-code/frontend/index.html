<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TweetStream - Twitter Clone</title>
    <style>
        /* TweetStream Frontend Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #15202b;
            color: #ffffff;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #1da1f2;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #8899a6;
            font-size: 1.1em;
        }

        .section {
            background: #192734;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid #38444d;
        }

        .section h2 {
            color: #1da1f2;
            margin-bottom: 15px;
        }

        .button {
            display: inline-block;
            background: #1da1f2;
            color: white;
            padding: 12px 20px;
            margin: 10px 5px;
            text-decoration: none;
            border-radius: 25px;
            text-align: center;
            transition: background 0.3s;
            cursor: pointer;
            border: none;
        }

        .button:hover {
            background: #1991db;
        }

        .status {
            background: #17bf63;
            color: white;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: #192734;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #38444d;
        }

        .stat-number {
            font-size: 2em;
            color: #1da1f2;
            font-weight: bold;
        }

        .stat-label {
            color: #8899a6;
            margin-top: 5px;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: #8899a6;
        }

        .data-display {
            background: #0f1419;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            max-height: 400px;
            overflow-y: auto;
        }

        .tweet {
            background: #192734;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 3px solid #1da1f2;
        }

        .tweet-user {
            color: #1da1f2;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tweet-content {
            color: #ffffff;
            margin-bottom: 10px;
        }

        .tweet-meta {
            color: #8899a6;
            font-size: 0.9em;
        }

        .user-card {
            background: #192734;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            align-items: center;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            color: #1da1f2;
            font-weight: bold;
        }

        .user-username {
            color: #8899a6;
        }

        .hidden {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .section {
                padding: 15px;
            }
            
            .button {
                display: block;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê¶ TweetStream</h1>
            <p>A Twitter-like social media platform running on Kubernetes</p>
        </div>
        
        <div class="status">
            ‚úÖ TweetStream is running successfully! (Organized frontend with embedded styles! üé®)
        </div>
        
        <div class="stats" id="stats">
            <div class="stat-card">
                <div class="stat-number" id="users">5</div>
                <div class="stat-label">Active Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="tweets">10</div>
                <div class="stat-label">Total Tweets</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="likes">13</div>
                <div class="stat-label">Total Likes</div>
            </div>
        </div>
        
        <div class="section">
            <h2>üîó API Endpoints</h2>
            <button class="button" onclick="loadHealth()">Health Check</button>
            <button class="button" onclick="loadTweets()">View All Tweets</button>
            <button class="button" onclick="loadUsers()">View All Users</button>
            <button class="button" onclick="loadStats()">Load Live Stats</button>
            <div id="api-data" class="data-display hidden"></div>
        </div>
        
        <div class="section">
            <h2>üìä Monitoring</h2>
            <a href="http://prometheus.192.168.1.82.nip.io:30080/" class="button" target="_blank">Prometheus Metrics</a>
            <a href="http://grafana.192.168.1.82.nip.io:30080/" class="button" target="_blank">Grafana Dashboard</a>
        </div>
        
        <div class="footer">
            <p>Powered by Kubernetes ‚Ä¢ PostgreSQL ‚Ä¢ Redis ‚Ä¢ Kafka</p>
            <p>Running on Earth-based machines with normal OS! üåç</p>
        </div>
    </div>
    
    <script>
        // TweetStream Frontend JavaScript
        
        // Configuration
        const apiBase = '/api/api';
        const dataDisplay = document.getElementById('api-data');
        
        // Utility functions
        function showData() {
            dataDisplay.classList.remove('hidden');
        }
        
        function hideData() {
            dataDisplay.classList.add('hidden');
        }
        
        // API Functions
        async function loadHealth() {
            try {
                const response = await fetch('/api/health');
                const data = await response.json();
                dataDisplay.innerHTML = `
                    <h3>üü¢ System Health Status</h3>
                    <div style="background: #17bf63; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <strong>Status:</strong> ${data.status}<br>
                        <strong>Database:</strong> ${data.database}<br>
                        <strong>Redis:</strong> ${data.redis}<br>
                        <strong>Uptime:</strong> ${Math.round(data.uptime)} seconds<br>
                        <strong>Last Check:</strong> ${new Date(data.timestamp).toLocaleString()}
                    </div>
                `;
                showData();
            } catch (error) {
                dataDisplay.innerHTML = '<h3>‚ùå Error loading health data</h3>';
                showData();
            }
        }
        
        async function loadTweets() {
            try {
                const response = await fetch(apiBase + '/tweets');
                const data = await response.json();
                if (data.success && data.tweets) {
                    let html = '<h3>üê¶ All Tweets</h3>';
                    data.tweets.forEach(tweet => {
                        html += `
                            <div class="tweet">
                                <div class="tweet-user">@${tweet.username} (${tweet.display_name})</div>
                                <div class="tweet-content">${tweet.content}</div>
                                <div class="tweet-meta">
                                    ‚ù§Ô∏è ${tweet.likes_count} likes ‚Ä¢ üîÑ ${tweet.retweets_count} retweets ‚Ä¢ 
                                    üìÖ ${new Date(tweet.created_at).toLocaleDateString()}
                                </div>
                            </div>
                        `;
                    });
                    dataDisplay.innerHTML = html;
                } else {
                    dataDisplay.innerHTML = '<h3>No tweets found</h3>';
                }
                showData();
            } catch (error) {
                dataDisplay.innerHTML = '<h3>‚ùå Error loading tweets</h3>';
                showData();
            }
        }
        
        async function loadUsers() {
            try {
                const response = await fetch(apiBase + '/users');
                const data = await response.json();
                if (data.success && data.users) {
                    let html = '<h3>üë• All Users</h3>';
                    data.users.forEach(user => {
                        html += `
                            <div class="user-card">
                                <img src="${user.avatar_url}" alt="Avatar" class="user-avatar">
                                <div class="user-info">
                                    <div class="user-name">${user.display_name} ${user.is_verified ? '‚úÖ' : ''}</div>
                                    <div class="user-username">@${user.username}</div>
                                    <div style="color: #8899a6; margin-top: 5px;">
                                        üìß ${user.email} ‚Ä¢ üìÖ Joined ${new Date(user.created_at).toLocaleDateString()}
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    dataDisplay.innerHTML = html;
                } else {
                    dataDisplay.innerHTML = '<h3>No users found</h3>';
                }
                showData();
            } catch (error) {
                dataDisplay.innerHTML = '<h3>‚ùå Error loading users</h3>';
                showData();
            }
        }
        
        async function loadStats() {
            try {
                const response = await fetch(apiBase + '/stats');
                const data = await response.json();
                if (data.success) {
                    document.getElementById('users').textContent = data.stats.total_users || '5';
                    document.getElementById('tweets').textContent = data.stats.total_tweets || '10';
                    document.getElementById('likes').textContent = data.stats.total_likes || '13';
                    
                    dataDisplay.innerHTML = `
                        <h3>üìä Live Statistics</h3>
                        <div style="background: #17bf63; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>Total Users:</strong> ${data.stats.total_users}<br>
                            <strong>Total Tweets:</strong> ${data.stats.total_tweets}<br>
                            <strong>Total Likes:</strong> ${data.stats.total_likes}<br>
                            <strong>Updated:</strong> ${new Date().toLocaleString()}
                        </div>
                    `;
                    showData();
                }
            } catch (error) {
                dataDisplay.innerHTML = '<h3>üìä Using cached statistics</h3>';
                showData();
            }
        }
        
        // Auto-refresh stats every 30 seconds
        setInterval(loadStats, 30000);
        
        // Future enhancement functions (ready for expansion)
        function createTweet() {
            // TODO: Implement tweet creation functionality
            console.log('Tweet creation feature coming soon!');
        }
        
        function likeTweet(tweetId) {
            // TODO: Implement like functionality
            console.log(`Like tweet ${tweetId} - feature coming soon!`);
        }
        
        function retweetTweet(tweetId) {
            // TODO: Implement retweet functionality
            console.log(`Retweet ${tweetId} - feature coming soon!`);
        }
        
        function followUser(userId) {
            // TODO: Implement follow functionality
            console.log(`Follow user ${userId} - feature coming soon!`);
        }
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('TweetStream frontend loaded successfully!');
            // Load initial stats
            loadStats();
        });
    </script>
</body>
</html> 